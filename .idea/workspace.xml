<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="BranchesTreeState">
    <expand>
      <path>
        <item name="ROOT" type="e8cecc67:BranchNodeDescriptor" />
        <item name="LOCAL_ROOT" type="e8cecc67:BranchNodeDescriptor" />
      </path>
    </expand>
    <select />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="113c828c-9a32-4b24-ab1e-978ce50c6320" name="Default Changelist" comment="Fixed script warn about wiping entire partition did not have condition set&#10;&#10;Fixed rsync transfer file error because of invalid directory after ISO creation.&#10;&#10;Fixed wrong script path in da hook scripts&#10;&#10;Added condition to disable da hook script logging for deployment. This can be easily enabled in the file aa_options.conf">
      <change afterPath="$PROJECT_DIR$/secure/maxiaide/custom_rules" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/clamav_exclude_directory_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/clamav_exclude_extension_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/clamav_exclude_file_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/clamav_exclude_signature_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/maldet_exclude_extension_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/maldet_exclude_inotify_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/maldet_exclude_path_list" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/secure/maxiclam/maldet_exclude_signature_list" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/maxinet" beforeDir="false" afterPath="$PROJECT_DIR$/maxinet" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/maxinet.conf.sample" beforeDir="false" afterPath="$PROJECT_DIR$/maxinet.conf.sample" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/aa_options.conf" beforeDir="false" afterPath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/aa_options.conf" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/readme.md" beforeDir="false" afterPath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/readme.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/templates/aa_main.sh" beforeDir="false" afterPath="$PROJECT_DIR$/secure/directadmin/custom_scripts/aa_hook_scripts/templates/aa_main.sh" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="ComposerSettings">
    <execution />
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitToolBoxStore">
    <option name="projectConfigVersion" value="2" />
  </component>
  <component name="HighlightingSettingsPerFile">
    <setting file="file://$PROJECT_DIR$/maxinet.conf.sample" root0="FORCE_HIGHLIGHTING" />
    <setting file="file://$PROJECT_DIR$/maxinet.log" root0="FORCE_HIGHLIGHTING" />
  </component>
  <component name="JupyterTrust" id="8557b86d-6a50-45db-ace0-04efaf79add5" />
  <component name="MarkdownSettingsMigration">
    <option name="stateVersion" value="1" />
  </component>
  <component name="ProjectId" id="1n4BxEHbbfffUetR8AIQOCKdrFr" />
  <component name="ProjectViewState">
    <option name="autoscrollFromSource" value="true" />
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
    <option name="showMembers" value="true" />
    <option name="showVisibilityIcons" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "RunOnceActivity.OpenProjectViewOnStart": "true",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "WebServerToolWindowFactoryState": "false",
    "last_opened_file_path": "C:/Users/arafa/IdeaProjects/maxinet_public/secure/maxiclam",
    "nodejs_package_manager_path": "npm"
  }
}]]></component>
  <component name="RecentsManager">
    <key name="CopyFile.RECENT_KEYS">
      <recent name="C:\Users\arafa\IdeaProjects\maxinet_public\secure\maxiclam" />
      <recent name="C:\Users\arafa\IdeaProjects\maxinet_public\secure\directadmin\custom_scripts\aa_hook_scripts" />
      <recent name="C:\Users\arafa\IdeaProjects\maxinet_public\secure\directadmin" />
      <recent name="C:\Users\Maxibi\IdeaProjects\maxinet_public" />
      <recent name="C:\Users\Maxibi\IdeaProjects\maxinet_public\storage\os\debian\usr\local\maxicode\maxigpg" />
    </key>
    <key name="MoveFile.RECENT_KEYS">
      <recent name="C:\Users\Maxibi\IdeaProjects\maxinet_public\storage\os\debian\usr\local\maxicode\maxida" />
    </key>
  </component>
  <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="113c828c-9a32-4b24-ab1e-978ce50c6320" name="Default Changelist" comment="" />
      <created>1610639727171</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1610639727171</updated>
      <workItem from="1610639729879" duration="6369000" />
      <workItem from="1610901827130" duration="26000" />
      <workItem from="1611060627378" duration="578000" />
      <workItem from="1611111970165" duration="726000" />
      <workItem from="1611119189290" duration="111000" />
      <workItem from="1611119716499" duration="640000" />
      <workItem from="1611125941805" duration="309000" />
      <workItem from="1611168472056" duration="591000" />
      <workItem from="1611175755428" duration="61000" />
      <workItem from="1611176395419" duration="623000" />
      <workItem from="1611204454142" duration="41000" />
      <workItem from="1611209121554" duration="45000" />
      <workItem from="1611347809837" duration="512000" />
      <workItem from="1611498737863" duration="1042000" />
      <workItem from="1611518018216" duration="133000" />
      <workItem from="1611562272910" duration="1267000" />
      <workItem from="1611606974766" duration="669000" />
      <workItem from="1611668636777" duration="220000" />
      <workItem from="1611676976866" duration="1907000" />
      <workItem from="1611720592625" duration="501000" />
      <workItem from="1611759532844" duration="255000" />
      <workItem from="1611810652589" duration="1907000" />
      <workItem from="1612218855745" duration="84000" />
      <workItem from="1612328072902" duration="431000" />
      <workItem from="1612328605749" duration="15000" />
      <workItem from="1612424397725" duration="99000" />
      <workItem from="1612563031331" duration="1107000" />
      <workItem from="1612595289583" duration="775000" />
      <workItem from="1612629728941" duration="375000" />
      <workItem from="1612691163233" duration="82000" />
      <workItem from="1612803371180" duration="1283000" />
      <workItem from="1612872396241" duration="691000" />
      <workItem from="1612882949536" duration="3686000" />
      <workItem from="1613105200159" duration="810000" />
      <workItem from="1613156115910" duration="685000" />
      <workItem from="1613186808621" duration="220000" />
      <workItem from="1613227232365" duration="1987000" />
      <workItem from="1613303231902" duration="46000" />
      <workItem from="1613363275079" duration="1743000" />
      <workItem from="1613473850928" duration="660000" />
      <workItem from="1613629292005" duration="1062000" />
      <workItem from="1613884920584" duration="223000" />
      <workItem from="1614007987378" duration="3439000" />
      <workItem from="1614011930702" duration="6762000" />
      <workItem from="1614097121634" duration="623000" />
      <workItem from="1614216114189" duration="745000" />
      <workItem from="1614232545521" duration="773000" />
      <workItem from="1614266586470" duration="666000" />
      <workItem from="1614477926248" duration="748000" />
      <workItem from="1614571670894" duration="1270000" />
      <workItem from="1614784448834" duration="1161000" />
      <workItem from="1614897076790" duration="381000" />
      <workItem from="1614958776087" duration="643000" />
      <workItem from="1615002022668" duration="10000" />
      <workItem from="1615239305318" duration="1445000" />
      <workItem from="1615293478079" duration="653000" />
      <workItem from="1615389523618" duration="703000" />
      <workItem from="1615390751539" duration="425000" />
      <workItem from="1615433887098" duration="1823000" />
      <workItem from="1615518866938" duration="1306000" />
      <workItem from="1615899875978" duration="1301000" />
      <workItem from="1616041089799" duration="681000" />
      <workItem from="1616485060127" duration="218000" />
      <workItem from="1616775489791" duration="247000" />
      <workItem from="1616967729570" duration="663000" />
      <workItem from="1616992234065" duration="657000" />
      <workItem from="1617015443162" duration="1289000" />
      <workItem from="1617911212573" duration="711000" />
      <workItem from="1618281411540" duration="1061000" />
      <workItem from="1618285814017" duration="456000" />
      <workItem from="1618286364179" duration="597000" />
      <workItem from="1618638079416" duration="1843000" />
      <workItem from="1618772644734" duration="166000" />
      <workItem from="1618840638817" duration="902000" />
      <workItem from="1618881037650" duration="6421000" />
      <workItem from="1619707123070" duration="13000" />
      <workItem from="1620542695164" duration="632000" />
      <workItem from="1620570365186" duration="839000" />
      <workItem from="1621892586781" duration="411000" />
      <workItem from="1623470589122" duration="578000" />
      <workItem from="1623567346540" duration="150000" />
      <workItem from="1623602386999" duration="1077000" />
      <workItem from="1623778547692" duration="124000" />
      <workItem from="1624199287030" duration="1409000" />
      <workItem from="1624200761253" duration="223000" />
      <workItem from="1624299515287" duration="388000" />
      <workItem from="1624755878260" duration="8041000" />
      <workItem from="1626535553982" duration="970000" />
      <workItem from="1626639764813" duration="2357000" />
      <workItem from="1626708524061" duration="831000" />
      <workItem from="1626758624218" duration="720000" />
      <workItem from="1626766759652" duration="70000" />
      <workItem from="1626785432462" duration="603000" />
      <workItem from="1626799157177" duration="101000" />
      <workItem from="1626881645441" duration="53000" />
      <workItem from="1626891301347" duration="502000" />
      <workItem from="1626919806027" duration="673000" />
      <workItem from="1626928324558" duration="116000" />
      <workItem from="1626968078798" duration="274000" />
      <workItem from="1626968547522" duration="284000" />
      <workItem from="1626975093419" duration="438000" />
      <workItem from="1627050877271" duration="680000" />
      <workItem from="1627100825003" duration="38000" />
      <workItem from="1627105983148" duration="220000" />
      <workItem from="1627106216163" duration="259000" />
      <workItem from="1627107273019" duration="48000" />
      <workItem from="1627146436150" duration="81000" />
      <workItem from="1627157743367" duration="166000" />
      <workItem from="1627193218756" duration="80000" />
      <workItem from="1627231551399" duration="660000" />
      <workItem from="1627268408161" duration="388000" />
      <workItem from="1627309836318" duration="2635000" />
      <workItem from="1627320299029" duration="15000" />
      <workItem from="1627362031644" duration="68000" />
      <workItem from="1627434169974" duration="172000" />
      <workItem from="1627466137882" duration="1551000" />
      <workItem from="1627492616869" duration="2730000" />
      <workItem from="1627563746411" duration="87000" />
      <workItem from="1627642337531" duration="681000" />
      <workItem from="1627883730634" duration="685000" />
      <workItem from="1628007859935" duration="874000" />
      <workItem from="1628019440685" duration="181000" />
      <workItem from="1628062191288" duration="60000" />
      <workItem from="1628073003200" duration="2218000" />
      <workItem from="1628189695709" duration="92000" />
      <workItem from="1628215286944" duration="14924000" />
      <workItem from="1628239915909" duration="862000" />
      <workItem from="1628398193754" duration="2039000" />
      <workItem from="1628659187949" duration="2405000" />
      <workItem from="1628666772770" duration="42000" />
      <workItem from="1628697180455" duration="1989000" />
      <workItem from="1628699216761" duration="10000" />
      <workItem from="1628917776220" duration="3563000" />
      <workItem from="1629119642597" duration="1117000" />
      <workItem from="1629126116798" duration="1479000" />
      <workItem from="1629127690339" duration="662000" />
      <workItem from="1629525835084" duration="3771000" />
      <workItem from="1629530977158" duration="2764000" />
      <workItem from="1629534271387" duration="6278000" />
      <workItem from="1629548322112" duration="29000" />
      <workItem from="1629756166950" duration="2309000" />
      <workItem from="1629758697053" duration="20000" />
      <workItem from="1629822158707" duration="1147000" />
      <workItem from="1629830169077" duration="217000" />
      <workItem from="1629938562074" duration="6782000" />
      <workItem from="1629957896194" duration="810000" />
      <workItem from="1630030595147" duration="1703000" />
      <workItem from="1630034597861" duration="1960000" />
      <workItem from="1630163908619" duration="1884000" />
      <workItem from="1630197817847" duration="36000" />
      <workItem from="1630254803757" duration="627000" />
      <workItem from="1630418468305" duration="858000" />
      <workItem from="1630503462776" duration="2926000" />
      <workItem from="1630596139930" duration="489000" />
      <workItem from="1630851039309" duration="938000" />
      <workItem from="1630947902589" duration="440000" />
      <workItem from="1631072042661" duration="1356000" />
      <workItem from="1631174763803" duration="829000" />
      <workItem from="1631178200588" duration="612000" />
      <workItem from="1631316504142" duration="1407000" />
      <workItem from="1631547606627" duration="1822000" />
      <workItem from="1631974722213" duration="3225000" />
      <workItem from="1631986674456" duration="21000" />
      <workItem from="1632763775549" duration="1188000" />
      <workItem from="1632808320696" duration="132000" />
      <workItem from="1633877227044" duration="2121000" />
      <workItem from="1633879825717" duration="1294000" />
      <workItem from="1634094067110" duration="740000" />
      <workItem from="1634438375678" duration="480000" />
      <workItem from="1634462901628" duration="844000" />
      <workItem from="1634475098666" duration="22000" />
      <workItem from="1634485845051" duration="726000" />
      <workItem from="1664472031536" duration="118000" />
      <workItem from="1666397389645" duration="841000" />
      <workItem from="1666630859704" duration="1135000" />
      <workItem from="1666681519184" duration="1404000" />
      <workItem from="1666787888307" duration="1615000" />
      <workItem from="1666830644704" duration="1151000" />
      <workItem from="1666897582651" duration="27000" />
      <workItem from="1666897616528" duration="19000" />
      <workItem from="1667005990307" duration="1142000" />
      <workItem from="1667075409429" duration="1093000" />
      <workItem from="1667118265401" duration="941000" />
      <workItem from="1667184911973" duration="202000" />
      <workItem from="1668053106701" duration="1201000" />
      <workItem from="1668229060416" duration="1578000" />
      <workItem from="1668284673842" duration="6000" />
      <workItem from="1669131079393" duration="647000" />
      <workItem from="1669319225392" duration="292000" />
      <workItem from="1669744510050" duration="1737000" />
      <workItem from="1669763667783" duration="1433000" />
      <workItem from="1669819755671" duration="1298000" />
      <workItem from="1669875590431" duration="10000" />
      <workItem from="1669914798068" duration="206000" />
      <workItem from="1670080624866" duration="5180000" />
      <workItem from="1670227357290" duration="4054000" />
      <workItem from="1670241896177" duration="684000" />
      <workItem from="1670305108289" duration="459000" />
    </task>
    <task id="LOCAL-00113" summary="new update and improvement">
      <created>1628073122246</created>
      <option name="number" value="00113" />
      <option name="presentableId" value="LOCAL-00113" />
      <option name="project" value="LOCAL" />
      <updated>1628073122246</updated>
    </task>
    <task id="LOCAL-00114" summary="Improved _echo() function, added ability to send push notification via _echo() function with --push-notification and --push-notification-silent&#10;&#10;Improved script function names to have ability to exit script with option --skip-mark-exit and --skip-exit&#10;&#10;Other updates and improvements">
      <created>1628189793521</created>
      <option name="number" value="00114" />
      <option name="presentableId" value="LOCAL-00114" />
      <option name="project" value="LOCAL" />
      <updated>1628189793521</updated>
    </task>
    <task id="LOCAL-00115" summary="New update and improvement &#10;&#10;shorten some codes">
      <created>1628240083983</created>
      <option name="number" value="00115" />
      <option name="presentableId" value="LOCAL-00115" />
      <option name="project" value="LOCAL" />
      <updated>1628240083983</updated>
    </task>
    <task id="LOCAL-00116" summary="Added debug function for directadmin (This is very useful for faster debugging while running directadmin where you do not have to write long commands to enter or quit directadmin debug mode). Temporarily use maxinet binary (the original binary is maxida) to put directadmin to debug mode with:&#10;&#10;This will debug with full output:&#10;maxinet --da-api debug (or maxida --debug)&#10;&#10;This will debug with filtered output of &quot;POST&quot;:&#10;maxinet --da-api debug --text-output &quot;POST&quot; (or maxida --debug --text-output &quot;POST&quot;)&#10;&#10;When directadmin debug mode is turn on, the standard directadmin process will be terminated, press CTRL+C to quit debug mode and directadmin will restart the normal process.&#10;&#10;---&#10;&#10;Improved gotify push notification, added a new option --push-notification-silent&#10;&#10;Added new function urldecode() and urlencode() to decode and encode URL used for API (especially for directadmin that requires this data to be encoded before sending to API)&#10;&#10;Added an initialize os_initialize.sh script in operating system preseed file where this script placeholder is going to be used to run extra long commands after operating system has completely installed and before it is rebooting&#10;&#10;Modified preseed file warning quotations by shellcheck&#10;&#10;Another improvement of directadmin API, includes option --recommend-values to put recommended values for specific API setting&#10;&#10;Fixed start_execute_options did not skip function and improved the function_name execution output&#10;&#10;Improve configure_fstab() function, the script will try to configure disk quota based on the condition of this guide (with extra switching to journaled quota if system is supported) https://help.directadmin.com/item.php?id=42&#10;&#10;New variable:&#10;C_DISK_QUOTA=true&#10;&#10;Other update and improvement">
      <created>1628399650216</created>
      <option name="number" value="00116" />
      <option name="presentableId" value="LOCAL-00116" />
      <option name="project" value="LOCAL" />
      <updated>1628399650216</updated>
    </task>
    <task id="LOCAL-00117" summary="Improved LUKS remote auto unlock, where it will check only call LUKS unlock if disk is set to be encrypted with LUKS -- line 1043&#10;&#10;Fixed output path line --line 1350&#10;&#10;&#10;Changed variable C_DA_MAX_UNAME_LENGTH to directadmin variable name convention C_DA_MAX_USERNAME_LENGTH (followed variable in directadmin.conf after prefix C_DA_) .. line 1868, 1925, 1992, 2095&#10;&#10;Test fixing debian preseed file when specifying in-target, we do not need to use /target/ (under testing) .. line 3187&#10;&#10;Added new option for directadmin api to insert domain records, include --record-type, --record-name, --record-value, --record-ttl, and --affect-pointers&#10;&#10;Added directadmin debug mode shortcut command for productivity. For example to put directadmin into debug mode, we can just trigger this command:&#10;&#10;maxinet --da-api debug&#10;&#10;or with filtered output&#10;&#10;maxinet --da-api debug &quot;CMD_&quot;&#10;&#10;To exit debug mode press CTRL+C and directadmin process will automatically restart non-debug mode.&#10;&#10;&#10;Improved da_api_admin, new changes on login method sign-as, if users are not found in directadmin data, we use authentication from the default setup.txt supplied by directadmin. If the authentication is not valid, script will halt. Take a look at this simple example how the --sign-as feature work:&#10;&#10;Let say we want to enable domain DKIM for a new domain, we use the following command:&#10;&#10;da_api_admin enable-email-dkim --sign-as &quot;maxi32&quot; --domain &quot;sofibox.com&quot;&#10;&#10;What the above command will do is,&#10;1) Search the action 'enable-email-dkim' if found, use --sign-as to find user maxi32 inside directadmin data including config file &lt;script_name&gt;.conf. If they are not in there, it will use authentication from default setup.txt (so username might become admin not maxi32). You can omit --sign-as argument to use default owner.  &#10;&#10;Added note / workaround for CMD_API_ADMIN_SETTINGS that do not have official api released, it can be used but make sure it is in json format. https://forum.directadmin.com/threads/api-set-server-hostname.37872/post-188426&#10;&#10;Specify new variables in API data using C_DA_IP_BRUTECOUNT, C_DA_ADMIN_LOGS_TO_KEEP, C_DA_SESSION_MINUTES, C_DA_USER_BRUTECOUNT&#10;&#10;use another method to kill nginx that does not kill properly .. line 7042 and 7047&#10;&#10;Added checking after da installation make sure the directadmin and custombuild binary exist .. line 8598 .. 8607&#10;&#10;Temporary use uid for storing creator of root, so we can return the username of the admin even it has changed its username to something else (got a very nice solution to be used later) .. 8609&#10;&#10;Fixed typo --netmask-ip should be --netmask .. line 8904&#10;&#10;Added bunch of directadmin conf setting inside configure_da_settings() &#10;&#10;Added note ssl_redirect_host is deprecated in directadmin 1.62+ .. line 11378&#10;&#10;Added new function configure_da_cb_settings() to set custombuild settings&#10;&#10;Added new download path ${SCRIPT_NAME}/download, for downloading files from remote server or do something else in this folder&#10;&#10;Added bunch of new variables in &lt;script_name&gt;.conf&#10;&#10;Added directadmin placeholder options.conf setup for initial setup (the value can be anything) so that we can only use this to execute directadmin custom setup (instead of using auto setup)&#10;&#10;Other updates and improvements">
      <created>1628699180695</created>
      <option name="number" value="00117" />
      <option name="presentableId" value="LOCAL-00117" />
      <option name="project" value="LOCAL" />
      <updated>1628699180695</updated>
    </task>
    <task id="LOCAL-00118" summary="Update information:&#10;&#10;Added function awksep(). This function is used to print all text as multiple row separated by symbol. Usage example:&#10;&#10;echo &quot;Test=19-&amp;Hello=2+&quot; | awksep '&amp;'&#10;&#10;Output:&#10;&#10;Test=19-&#10;Hello=2+&#10;&#10;You can even specify multiple separators like&#10;&#10;echo &quot;Test=19-&amp;Hello=2+&quot; | awksep '+/-'&#10;&#10;---------&#10;&#10;Fixed added sh command to execute sample placeholder script for initialization operating system .. line 3197&#10;&#10;---&#10;&#10;Fixed some output color&#10;&#10;---&#10;&#10;Increase linode_max_page from 2 to 3 to increase search paging (this might not impact performance drastically because once data found, the API search will automatically break / stop)&#10;&#10;---&#10;&#10;Added --rebuild option to linode API. It is used to force recreate a record. For example if we want to create a domain we would do this:&#10;&#10;linode_api_admin create-domain --domain server.com --domain-type master --domain-email test@server.com --domain-ttl 300 --rebuild&#10;&#10;This above command will create a linode domain server.com. If the domain already in linode DNS, it will skip creation and this will leave some default DNS records unchanged. When you put an extra --rebuild option, it will delete the domain and re-add. So you will start from scratch adding new DNS record for this domain&#10;&#10;Added alias argument of add-domain. So the create-domain and add-domain are the same … line 4536&#10;&#10;---&#10;&#10;Fixed missing --ttl_sec in linode API when scripting=true … linde 4619&#10;&#10;---&#10;&#10;Added new linode API, delete-domain (similar to remove-domain)&#10;&#10;&#10;-- &#10;&#10;Improved API from the previous one on deleting multiple DNS record … line 4875&#10;&#10;-- &#10;&#10;Added --special-type option for directadmin API. This is used to specify that the record type is special. Currently only 4 special types: dkim, dmarc, spf and dkim-policy&#10;&#10;--&#10;&#10;Improved directadmin debug output&#10;&#10;--&#10;&#10;New changes to directadmin authentication usage&#10;&#10;Now we don’t use the hard looping method. We use simple check obtained from directadmin user directories. Look at the example how powerful is this method:&#10;&#10;Let say the current user is admin that was just being created by admin. So normally, this user has the default authentication stored in /usr/local/directadmin/scripts/setup.txt&#10;&#10;Now, let's demonstrate how to enable DKIM for a domain:&#10;&#10;da_api_admin enable-domain-dkim --domain test.com&#10;&#10;Notice the above command did not have --sign-as parameter. Hence it will automatically search the default admin from config file that has username ${C_DA_OWNER_USERNAME1}. If this does not exist, it will try to find this user in setup.txt and use that to enable-domain-dkim. If still not found, the script will halt&#10;&#10;Now, lets take a look another way how to use sign-as:&#10;&#10;da_api_admin enable-domain-dkim --sign-as reseller1 --domain test.com&#10;&#10;Notice the above reseller1 is a reserved role (the other reserved roles are admin1, owner1 and user1). The api will first convert the role to username, in this case it will obtain the username from the first reseller ${C_DA_RESELLER_USERNAME1}. If not found, the script will halt&#10;&#10;Now, lets take a look another way how to use sign-as with username&#10;&#10; da_api_admin enable-domain-dkim --sign-as maxi32 --domain test.com&#10;&#10;The above command will use user maxi32 that is found from config file (this user can be reseller, owner, admin or normal user). If found it will use the default owner password to do sign-as. So the username would be admin|maxi32. This feature is introduced by directadmin to authenticate client without password.&#10;&#10;Now finally let's take a look that we can also use manual authentication for the API like this&#10;&#10; da_api_admin enable-domain-dkim --api-username maxi32 --api-password abc123 --domain test.com&#10;&#10;If the username and password don’t exist, it will halt the script ask to supply correct username and password before being used by API.&#10;&#10;&#10;--&#10;&#10;Added new directadmin API get-dns-special-record-type-value&#10;&#10;--&#10;&#10;Reduce restart da max_wait time, it is best to use 70 seconds because directadmin should execute taskq less than 60 seconds&#10;&#10;--&#10;&#10;Added a new method to obtain the default admin even its name has changed&#10;&#10;&#10;--&#10;&#10;Fixed readd C_DA_PORT in CSF (it was missing)&#10;&#10;--&#10;&#10;Enabled DNS custom template for directadmin latest version 1.62.5 and give notice or warning if directadmin has a new version (ask to inspect if it is compatible)&#10;&#10;--&#10;&#10;Fixed configure_da_admin_accounts(), the sign-as should be admin1 not owner1&#10;&#10;--&#10;&#10;Updated configure_da_reseller_accounts (now multiple reseller can be added automatically using config file. Sample template written in &lt;script_name&gt;.conf).">
      <created>1628920758908</created>
      <option name="number" value="00118" />
      <option name="presentableId" value="LOCAL-00118" />
      <option name="project" value="LOCAL" />
      <updated>1628920758909</updated>
    </task>
    <task id="LOCAL-00119" summary="Various update and improvement + Bug fixed">
      <created>1629120167250</created>
      <option name="number" value="00119" />
      <option name="presentableId" value="LOCAL-00119" />
      <option name="project" value="LOCAL" />
      <updated>1629120167250</updated>
    </task>
    <task id="LOCAL-00120" summary="Update information:&#10;&#10;Script is now fully compatible with latest debian version, &#10;&#10;You can change the version of Debian like this (if you know the version number and code name):&#10;&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;&#10;&#10;or if you don't care, you can set this variable to download latest version of Debian (will ignore the above 2 variables), for example if Debian 12 is released, it will download this one and you don't have to do anything. Just set this to true:&#10;&#10;USE_LATEST_ISO=true&#10;&#10;New variables:&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;">
      <created>1629126967639</created>
      <option name="number" value="00120" />
      <option name="presentableId" value="LOCAL-00120" />
      <option name="project" value="LOCAL" />
      <updated>1629126967639</updated>
    </task>
    <task id="LOCAL-00121" summary="New: Update information (Fixed missing assignment): &#10; &#10;debian_release=&quot;stable&quot;&#10;&#10;Script is now fully compatible with latest debian version, &#10;&#10;You can change the version of Debian like this (if you know the version number and code name):&#10;&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;&#10;&#10;or if you don't care, you can set this variable to download latest version of Debian (will ignore the above 2 variables), for example if Debian 12 is released, it will download this one and you don't have to do anything. Just set this to true:&#10;&#10;USE_LATEST_ISO=true&#10;&#10;New variables:&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;">
      <created>1629127602718</created>
      <option name="number" value="00121" />
      <option name="presentableId" value="LOCAL-00121" />
      <option name="project" value="LOCAL" />
      <updated>1629127602718</updated>
    </task>
    <task id="LOCAL-00122" summary="New: Update information (Fixed missing assignment): &#10; &#10;debian_release=&quot;stable&quot;&#10;&#10;Script is now fully compatible with latest debian version, &#10;&#10;You can change the version of Debian like this (if you know the version number and code name):&#10;&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;&#10;&#10;or if you don't care, you can set this variable to download latest version of Debian (will ignore the above 2 variables), for example if Debian 12 is released, it will download this one and you don't have to do anything. Just set this to true:&#10;&#10;USE_LATEST_ISO=true&#10;&#10;New variables:&#10;C_DEBIAN_OS_SELECT_VERSION=&quot;11.0.0&quot;&#10;C_DEBIAN_OS_CODE_NAME=&quot;bullseye&quot;">
      <created>1629127788454</created>
      <option name="number" value="00122" />
      <option name="presentableId" value="LOCAL-00122" />
      <option name="project" value="LOCAL" />
      <updated>1629127788454</updated>
    </task>
    <task id="LOCAL-00123" summary="Fixed bug when using _echo() function with --plain option it did not hide output if verbosity level is turn off or has lower value&#10;&#10;Other updates and improvement&#10;&#10;Added new variable C_GOTIFY_PUSH_PRIORITY in config file, to set push notification level on phone&#10;&#10;# 0 (No notification) , 1-3 (Icon in notification bar)&#10;# 4-7 (Icon in notification bar + Sound), 8-10 (Icon in notification bar +  Sound + Vibration)&#10;# Using 10 is has the highest sound and vibration.&#10;&#10;Modify script_header() function to include info on date_time and execution environment&#10;&#10;Modify help() function to correct the syntax how to create server from scratch&#10;&#10;Separated short and long options in getopt variable_api()&#10;&#10;Created separated functions to rebuild server config called init_server_rebuild_config(); and to rebuild partition called init_server_rebuild_partition(). These functions can be executed by using other execution parameters such as --force-run. for example in init_server_rebuild_config(), when using --force-run parameter it will force the external DNS to rebuild config file.&#10;&#10;Separated long and short options in init_server() function, and change ARGNUM to lowercase to represent local variable&#10;&#10;In init_server() function, the reboot option has been moved to the line after rebuild config is done&#10;&#10;Add countdown time to wait for server installation before restart in init_server()&#10;&#10;Fixed bug in ssh_api public-keys did not copy because of wrong check&#10;&#10;Added new function check_file_path() and check_folder_path() to check existence of file and folder respectively&#10;&#10;Renamed C_DEBIAN_OS_CODE_NAME variable to generic name C_OS_CODE_NAME (we might have another OS support in the future not just debian)&#10;&#10;Added resolvconf installation in debian preseed file creation. This resolvconf will manage resolv.conf&#10;&#10;Fixed small error in debian preseed file when host was trying to bypass local setting LANG LC_ and show error. This setting is stored in /etc/ssh/sshd_config&#10;&#10;Removed this source /etc/network/interfaces.d/ from /etc/network/interfaces through debian preseed file. This line is not needed.&#10;&#10;Added missing dns-nameservers for IPv4 debian preseed file&#10;&#10;Fixed the nightmare bug in debian preseed file which prevented IPv6 from working properly. I discovered that in line 3343, I got a syntax error there where I did not declare gateway but address&#10;&#10;Fixed, nameserver for resolv.conf should be declared in here /target/etc/resolvconf/resolv.conf.d/base to prevent overwrite&#10;&#10;Added a new dropbox cli installation forked from @andreafabrizi/Dropbox-Uploader. I'm going to help him maintain this source code.&#10;&#10;Separated short and long options for getopt in dropbox_api() function&#10;&#10;Added share action for dropbox_api()&#10;&#10;Separated long and short options for getopt in iso_api()&#10;&#10;Changed variable iso_os to have value C_BOX_ISO_OS_NAME not type in iso_api()&#10;&#10;Fixed quote problem and hide iso download output in iso_api()&#10;&#10;Added extra checking whether iso file is bootable before upload to dropbox (only valid iso is uploaded)&#10;&#10;Separated short option from getopt in linode_api_admin()&#10;&#10;Added extra validation record to include wildcard character * inside is_valid() function that is used in linode_api_admin()&#10;&#10;&#10;There many other changes (lazy to write it down) ...">
      <created>1629533138988</created>
      <option name="number" value="00123" />
      <option name="presentableId" value="LOCAL-00123" />
      <option name="project" value="LOCAL" />
      <updated>1629533138988</updated>
    </task>
    <task id="LOCAL-00124" summary="Add ipv4 and ipv6 validation in is_valid() function, check whether they are resolved with domain. Usage:&#10;&#10;is_valid ipv4_resolved &lt;IPv4&gt; &lt;DOMAIN&gt;, return 0 if true&#10;is_valid ipv6_resolved &lt;IPv6&gt; &lt;DOMAIN&gt;, return 0 if true&#10;&#10;Fixed IPv6 netmask regex did not accept /128 in is_valid() function. Previous regex only accepted maximum /64.&#10;&#10;Changed forked source code from arafatx/Dropbox_Uploader to sofibox/Dropbox_Uploader The original source belongs to andreafabrizi/Dropbox_Uploader (I'm going to maintain his code from sofibox/Dropbox repository and push for him from here).&#10;&#10;Added function ensure_host_domain_ip_resolved() to make sure IPv4 and IPv6 addresses are resolved with the hostname. This was on TODO list&#10;&#10;Fixed linode_api_admin MX record_value validation.&#10;&#10;Updated linode API to include CNAME record creation&#10;&#10;Added new option --scripting for da_api_admin() function to suppress error or logs, we only need final result.&#10;&#10;Added new API for da_api_admin() function to get dns-records by type for specific domain.&#10;&#10;Added new API for da_api_admin() function to reset-dns-records for specific domain&#10;&#10;Fixed DA port missing in directadmin.conf after installation. Added the DA port in secure_da_auth() function&#10;&#10;Added an extra option argument --init in configure_da_ips() function. The purpose of this option is to remove previous IPv6 configuration and linked information between IPv6 and IPv4. Technically, the --init option is used to re-create IPv6 server IP file in directadmin.&#10;&#10;Fixed IPv6 passed in configure_da_ips(). The IPv6 that must be passed should be in uncompressed from (directadmin requirement).&#10;&#10;Added new setting and check to enable DNS CAA record in directadmin. This DNS CAA record option need to have bind version 9.9.6 and above. The script has this validation and will automatically enabled this option if the requirement is met.&#10;&#10;Changed function configure_da_server_domains() to configure_da_host_domain(), this function is used to configure the main host server domain. In this function, the script will scan every records that the host server domain has and automatically add all of them in external DNS.&#10;&#10;Changed variable C_DA_CONFIG_VERSION to C_CONFIG_VERSION because C_DA_ is only for directadmin related variable.&#10;&#10;mariadb version is upgraded to 10.6">
      <created>1629757910806</created>
      <option name="number" value="00124" />
      <option name="presentableId" value="LOCAL-00124" />
      <option name="project" value="LOCAL" />
      <updated>1629757910806</updated>
    </task>
    <task id="LOCAL-00125" summary="Added server file monitoring aide handle by maxida script&#10;&#10;---&#10;added check for debian 11 to have wait time 300s and other OS default to 120 seconds when installing operating system&#10;&#10;---&#10;Renamed C_DA_WEB_SERVER_SOFTWARE to C_DA_CB_WEB_SERVER_SOFTWARE because it is a custombuild related options.&#10;&#10;---&#10;&#10;Now we can select multiple PHP version from config file&#10;&#10;C_DA_CB_PHP_VERSION=&lt;php_version1&gt;-&lt;php_mode&gt;,&lt;php_version2&gt;-&lt;php_mod&gt;, ... &lt;php_version4&gt;-&lt;php_mod&gt;&#10;&#10;Example: This will set the first PHP version as 7.3 (with mode FPM)and the second version as 8.0 with mode FPM&#10;C_DA_CB_PHP_VERSION=&quot;7.4-fpm,8.0-fpm&quot;&#10;&#10;Note the first order is the first PHP version (also used by directadmin system). Max is 4 PHP versions, extra argument will be ignored&#10;&#10;---&#10;Now it is possible to select which sql type and version to install. Just use the following variable format in config file:&#10;&#10;C_DA_CB_SQL_VERSION=&quot;&lt;sql_type&gt;-&lt;sql_version&gt;&quot;&#10;&#10;Example: This will install mariadb version 10.6&#10;C_DA_CB_SQL_VERSION=&quot;mariadb-10.6&quot;&#10;&#10;Example: This will install mysql version 5.8&#10;C_DA_CB_SQL_VERSION=&quot;mysql-5.8&quot;&#10;---&#10;&#10;Now it is possible to enable or disable mod security installation from config file:&#10;&#10;C_DA_CB_ENABLE_MODSECURITY=&quot;yes&quot; # or no&#10;C_DA_CB_MODSECURITY_RULESET=&quot;comodo&quot; # or owasp&#10;---&#10;&#10;Now it is possible to enable or disable clamav installation from config file:&#10;&#10;# This is for installing clamav&#10;C_DA_CB_ENABLE_CLAMAV=&quot;yes&quot;&#10;# Enable / disable clamav service&#10;C_ENABLE_CLAMAV_SERVICE=false (Testing)&#10;---&#10;&#10;The install_da() function will validate if directadmin installation return OK status, then print out login information (if HIDE_SENSITIVE_LABEL is set false) &#10;---&#10;&#10;Removed rebuild directadmin packages in install_da_post(). This packages were set to rebuild because it had bug. With the new version of directadmin, these rebuild commands are not needed.&#10;---&#10;&#10;Renamed C_DA_MODSECURITY_RULESET to C_DA_CB_MODSECURITY_RULESET because it is a custombuild related option&#10;&#10;---&#10;&#10;Improved mysql authentication check in configure_da_sql and added mysqltuner security checking&#10;---&#10;&#10;Renamed C_DA_FTP_SOFTWARE to C_DA_CB_FTP_SOFTWARE because it is a related custombuild option&#10;&#10;---&#10;&#10;Added a new function configure_os_services(), this function will configure operating system processes (testing)&#10;&#10;---">
      <created>1629949752493</created>
      <option name="number" value="00125" />
      <option name="presentableId" value="LOCAL-00125" />
      <option name="project" value="LOCAL" />
      <updated>1629949752493</updated>
    </task>
    <task id="LOCAL-00126" summary="New updated">
      <created>1629959553025</created>
      <option name="number" value="00126" />
      <option name="presentableId" value="LOCAL-00126" />
      <option name="project" value="LOCAL" />
      <updated>1629959553025</updated>
    </task>
    <task id="LOCAL-00127" summary="Update information:&#10;&#10;Fixed directadmin SSL auto detection whether to use http or https for API in is_valid() function&#10;&#10;Linode now has TTL lower than 5 minutes: 2 minutes and 30 seconds. record_ttl and domain_ttl is updated in is_valid() function.&#10;&#10;Decreased time to check hostname and IP is resolved from 120 seconds to 30 seconds in ensure_host_domain_ip_resolved() function&#10;&#10;Added new function copy_local_dns_to_external_dns(), this is a reusable function to add local DNS record into external DNS record (amazonaws, cloudflare, linode, digitalocean and more). Currently only linode is supported.&#10;&#10;Updated da_api_admin() to add email and database and create record for admin&#10;&#10;The DNS record creation code has been reduced a lot.&#10;&#10;Various update and improvement. The code is about to be in beta state.">
      <created>1630031679107</created>
      <option name="number" value="00127" />
      <option name="presentableId" value="LOCAL-00127" />
      <option name="project" value="LOCAL" />
      <updated>1630031679107</updated>
    </task>
    <task id="LOCAL-00128" summary="Update information:&#10;&#10;Fixed is_valid() site_ssl return success even site does not have ssl enabled.&#10;&#10;Fixed is_valid() ipv4 and ipv6 validation (removed ip route get method because this method requires IP is reachable)&#10;&#10;Fixed missing git dependencies before installing dropbox-cli in configure_dropbox_cli() function&#10;&#10;Improved ensure_host_domain_ip_resolved() function, add extra check for root host domain name (test.com). Automatically add missing domain and hostdomain together with its DNS A and AAAA record if missing for external DNS (only linode is supported right now)&#10;&#10;Improved ssh_api() function, add 2 method to transfer file via SSH (rsync and scp), first would be using rsync (but this requires rsync installed in remote server). If using rsync is failed, automatically use scp which is more portable but slower than rsync&#10;&#10;Directadmin API call is now using http only as described by directadmin documentation this protocol is not important and directadmin will try handle this on its own.&#10;&#10;Display selected port for debug mode in directadmin API call. For API call, the directadmin port is now obtained from directadmin.conf instead of config file.&#10;&#10;Added net-tools package for network troubleshooting&#10;&#10;In secure_os() function, allowed port 80 and 443 using ufw (for debian) and added reload ufw firewall to reload rules&#10;&#10;Added call ensure_host_domain_ip_resolved to make sure all IPs with domain are reachable before installing directadmin.&#10;&#10;Added letsencrypt staging call to prevent API call limit before requesting real certificate (for host domain name)&#10;&#10;Added new SSL key to use ECC certificate for security. New variables: &#10;&#10;C_DA_ECC_CERTIFIACTES=1&#10;C_DA_CERTIFICATE_SIZE=&quot;secp384r1&quot;&#10;&#10;Improved configure_da_user_emails() function, make it compatible with the new API call.&#10;&#10;Improved configure_da_user_databases() function, make it compatible with the new API call.&#10;&#10;Added call ensure_host_domain_ip_resolved before creating a server from scratch in setup() function">
      <created>1630165185296</created>
      <option name="number" value="00128" />
      <option name="presentableId" value="LOCAL-00128" />
      <option name="project" value="LOCAL" />
      <updated>1630165185296</updated>
    </task>
    <task id="LOCAL-00129" summary="Update information&#10;&#10;Updated validate_config() function, add extra config directadmin config validation before installing.&#10;&#10;Fixed restart_da() function did not reset counter due to source function called only once per script, Solution is to create new local variable to hold second value instead of using global variable.&#10;&#10;Fixed mysql authentication did not return correct output at configure_da_sql() function&#10;&#10;Improved configure_da_&lt;role&gt;_security() to use only one variable of array. To key in security question and answer, we only need one variable. Introduced new variable (available for all roles). Question and answer is separated with triple |||:&#10;&#10;C_DA_&lt;ROLE&gt;_SECURITY_QNA&lt;INDEX_NUMBER&gt;=(\&#10;&quot;Bila nak habis covid?|||entah ler&quot; \&#10;&quot;Kau tengah buat ape?|||entah ler&quot; \&#10;)&#10;&#10;Improved configure_da_&lt;role&gt;_emails() now renamed to configure_da_&lt;role&gt;_email_accounts. Same like security question and answer, email accounts only need one variable. Email and password is separated with triple |||:&#10;&#10;C_DA_&lt;ROLE&gt;_MAIL_ACCOUNT&lt;INDEX_NUMBER&gt;=(\&#10;&quot;webmaster@kakispy.com|||12321aa&quot; \&#10;&quot;info@kakispy.com|||12321aa&quot; \&#10;)&#10;&#10;Improved configure_da_&lt;role&gt;_databases(). Separate between Database username, name domain and database password with triple |||:&#10;&#10;C_DA_&lt;ROLE&gt;_DB_ACCOUNT&lt;INDEX_NUMBER&gt;=( \&#10;&quot;kakispy.com:dbname:dbusr|||Xdsadsadsadsadsa&quot; \&#10;)&#10;&#10;Some changes to the config file (added new documentation)&#10;&#10;Other update and improvement">
      <created>1630255106685</created>
      <option name="number" value="00129" />
      <option name="presentableId" value="LOCAL-00129" />
      <option name="project" value="LOCAL" />
      <updated>1630255106686</updated>
    </task>
    <task id="LOCAL-00130" summary="Update information&#10;&#10;Fixed ssl_site check (added a new method to check site ssl is available using curl). Previous method was using openssl which failed at specific time. SSL site does not even need to care about port. So no need to pass port.&#10;&#10;Added error checking in da_api_admin, if port does not exist in directadmin.conf, show an error (because this option must be in there).&#10;&#10;Added a new package installation rsync in setup_pre() function. This package will be used to backup system or transfer file. Rsync file transfer is better than scp.&#10;&#10;Fixed missing variable wait_count in output at restart_da() function &#10;&#10;Fixed get_current_da_owner_username() function did not return correct username if username is more than 2 (it should break if first valid user is found because there is only one owner (original admin username) in directadmin)&#10;&#10;Added a new function show_time() that converts second to time display in format of: d (day) h (hour) m (minute) s (second).&#10;&#10;Added a new feature to install directadmin in background (with spinning wheel and time elapsed output), but still get the original return code from the installer. So, during directadmin installation, we would not see messy output like php compiling output (which by the way the useless output for server admin to stare with for nothing). When the installation halt, it will printout the last 10 error message from the log file (we can fix the error, and re-run the script to continue but it would start from 0 second). This feature is only available for directadmin auto, original and custom installation mode. This is not available for directadmin interactive installation at it requires input from user such as to select software packages. The full log file will be stored in /log/da-install.log&#10;&#10;Added a new option AUTO_SELECT_DA_API_PROTOCOL, for API to choose whether to select https or http protocol for API based on the site SSL availability. This is a beta feature but it works perfectly up until now.&#10;&#10;Added a new API test-login after requesting certificate in configure_da_host_domain_ssl(). This is to make sure that the API is working perfectly for the new (SSL site) before proceeding.">
      <created>1630419065578</created>
      <option name="number" value="00130" />
      <option name="presentableId" value="LOCAL-00130" />
      <option name="project" value="LOCAL" />
      <updated>1630419065578</updated>
    </task>
    <task id="LOCAL-00131" summary="Forgot to comment out echo statement in is_valid ssl_site (which breaks the site ssl check)&#10;&#10;---&#10;&#10;Added a very important check ensure_linode_label_ipv4_valid(), to make sure IPv4 and hostname match with linode server info. If an IPv4 or multiple IPv4s from config file do not exist in linode, the script will halt (ask to correct the IP, probably typo). If the linode label does not match hostname, it will automatically rename the label to represent a full qualified host name.&#10;&#10;---&#10;&#10;Added a very important chek ensure_linode_rdns_resolved(), to make sure that the linode external DNS has its reverse DNS match with the current hostname in config file. If it does not match, it will automatically update the reverse DNS.&#10;&#10;---&#10;Fixed bug if use previous ISO file (it did not write the OS in rescue mode) by adding delay 7 seconds:&#10;&#10;The script is able to reuse previous ISO to install server operating system (without creating a new ISO). To do this, instead of using the command --rebuild-all or --rebuild-iso&#10;&#10;we can use this without the options:&#10;&#10;maxinet --create-server --rebuild-partition --rebuild-config (previously did not work now it is working perfectly)&#10;&#10;&#10;New variable:&#10;&#10;C_LINODE_LABEL&#10;&#10;Other updates ...">
      <created>1630503658119</created>
      <option name="number" value="00131" />
      <option name="presentableId" value="LOCAL-00131" />
      <option name="project" value="LOCAL" />
      <updated>1630503658120</updated>
    </task>
    <task id="LOCAL-00132" summary="Added extra check for IPv6 reverse DNS and auto update based on full qualified host name.&#10;&#10;Added a new maxicode_admin() function, use to update maxicode binary remotely via SSH. The usage is:&#10;&#10;SYNTAX:&#10;maxinet manage-maxicode &lt;action&gt; &lt;--options&gt;&#10;&#10;EXAMPLE:&#10;&#10;maxinet manage-maxicode update --app-name maxigpg --distro-name &quot;debian&quot;&#10;&#10;The command above will grab the latest debian code for maxigpg and update its binary in remote server.&#10;&#10;Other updates">
      <created>1630596621950</created>
      <option name="number" value="00132" />
      <option name="presentableId" value="LOCAL-00132" />
      <option name="project" value="LOCAL" />
      <updated>1630596621950</updated>
    </task>
    <task id="LOCAL-00133" summary="Display extra information when installing directadmin in install_da() function&#10;&#10;Rewrite configure_maxigpg function, install a bash CLI wrapper called maxigpg. More information here: https://github.com/sofibox/maxigpg_public. &#10;&#10;In configure_maxigpg, the function can either use existing gpg key or generate the new one based on the config variable C_GPG_USE_EXISTING_KEY. It is important that in order to sucessfully imported existing key, the C_GPG_OWNER_EMAIL variable must have email set correctly same as the username for the previous certificate. The script also has the ability to test the cache duration automatically.&#10;&#10;Other update and improvement (maxigpg, maxigpg-ag)">
      <created>1630851365622</created>
      <option name="number" value="00133" />
      <option name="presentableId" value="LOCAL-00133" />
      <option name="project" value="LOCAL" />
      <updated>1630851365622</updated>
    </task>
    <task id="LOCAL-00134" summary="Updated manage-maxicode action to push maxiaide script via SSH&#10;&#10;Updated configure_maxiaide function">
      <created>1630948138887</created>
      <option name="number" value="00134" />
      <option name="presentableId" value="LOCAL-00134" />
      <option name="project" value="LOCAL" />
      <updated>1630948138887</updated>
    </task>
    <task id="LOCAL-00135" summary="Update information:&#10;&#10;&#10;Fixed set_linux_crlf small error&#10;Renamed all DROPBOX_* config variables to C_DROPBOX_* to represent they are coming from config file&#10;&#10;Renamed ensure_host_resolved to ensure_domain_server_resolved(), this is only for host domain checker, added extra fix to recreate host domain and increase propagation duration check when it is failed&#10;&#10;Added new function ensure_fqhn_server_resolved(), similar to ensure_domain_server_resolved() but this is for full qualified host name&#10;&#10;Added new option to disable PHP dangerous function based on config file&#10;&#10;Added new installation for Wordpress CLI in configure_wpcli()&#10;&#10;Other updates">
      <created>1631072760836</created>
      <option name="number" value="00135" />
      <option name="presentableId" value="LOCAL-00135" />
      <option name="project" value="LOCAL" />
      <updated>1631072760836</updated>
    </task>
    <task id="LOCAL-00136" summary="Update information&#10;&#10;Updated MaxiAIDE&#10;&#10;Ignored domain recreate for IPv6 when checking propagation in ensure_domain_server_resolved() function&#10;&#10;Fixed small error record value contains . (dot) character for NS record in function copy_local_dns_to_external_dns()&#10;&#10;Added dos2unix installation at setup_pre() function&#10;&#10;Fixed typo name server assignment duplicated in configure_da_settings() function ... line 12055&#10;&#10;Renamed configure_da_host_domain() to configure_da_fqhn_server() for more readable function&#10;&#10;Renamed configure_da_host_domain_ssl() to configure_da_fqhn_server_ssl() for more readable function&#10;&#10;Other updates ...">
      <created>1631175031652</created>
      <option name="number" value="00136" />
      <option name="presentableId" value="LOCAL-00136" />
      <option name="project" value="LOCAL" />
      <updated>1631175031654</updated>
    </task>
    <task id="LOCAL-00137" summary="Big feature: Ability to import previous SSL certificate automatically for hostname if the variable C_DA_RESTORE_HOSTNAME_FQHN_SSL is set to true. The renewal process is also done automatically. The hostname assigned in C_DA_BOX_HOSTNAME_FQHN must match previous SSL backup. &#10;&#10;Added a new function get_listening_port(), to obtain the current status of the port. Usage:&#10;&#10;get_listening_port &lt;port_number&gt;&#10;&#10;Addeda a new function generate_unused_port(), to generate unused port in local system. Usage:&#10;&#10;generate_unused_port&#10;&#10;eg. output: 12344&#10;&#10;Added a generic function to obtain script last return status in get_status_message()&#10;&#10;Enable dropbox file deletion before uploading (read the comment why) ... line 3871&#10;&#10;Added alias function for pre_setup and post_setup&#10;&#10;Fixed hidden error in net_configure2 for IPv6 entries&#10;&#10;Hide sensitive password after directadmin installation (if C_HIDE_SENSITIVE_TEXT = true)&#10;&#10;Other updates">
      <created>1631317248121</created>
      <option name="number" value="00137" />
      <option name="presentableId" value="LOCAL-00137" />
      <option name="project" value="LOCAL" />
      <updated>1631317248121</updated>
    </task>
    <task id="LOCAL-00138" summary="Some security feature update, enable hsts on both host and domain, for host domain use this:&#10;&#10;C_DA_ENABLE_HOST_HSTS=&lt;value in second&gt;&#10;&#10;Added some other security headers:&#10;&#10;Added option to hide DA version header: use variable C_DA_SHOW_INFO_IN_HEADER (disabled by default)&#10;&#10;Added option to hide DA version title from client: use variable C_DA_SHOW_INFO_IN_TITLE (enabled by default)&#10;&#10;Block user directory access: use variable C_DA_CB_USERDIR_ACCESS&#10;&#10;Added a new function configure_domain_security()&#10;&#10;Renamed config variable from C_DA_RESTORE_HOSTNAME_FQHN_SSL to C_DA_RESTORE_PREVIOUS_HOSTNAME_SSL for better readability&#10;&#10;Added maxiperm ssh push in manage-maxicode action&#10;&#10;Improved configure_csf() for directadmin installation&#10;&#10;Added a new maxigpg public version&#10;&#10;Updated maxiaide public version to add new features&#10;&#10;Added a new maxiperm public version&#10;&#10;Other update and improvement">
      <created>1631548808869</created>
      <option name="number" value="00138" />
      <option name="presentableId" value="LOCAL-00138" />
      <option name="project" value="LOCAL" />
      <updated>1631548808869</updated>
    </task>
    <task id="LOCAL-00139" summary="New update&#10;&#10;Added function get_ordinal(), to convert integer to ordinal type&#10;&#10;Added a new option --progress-style &lt;STRING&gt; in function _echo(), now it is possible to overwrite the config value for C_SPIN_PROGRESS. This option is used together with --start-spin&#10;&#10;Other update and improvement&#10;&#10;Add the ability to add new MX record that does not have subdomain in copy_local_dns_to_external_dns(), this root MX record is required by mail-tester.com to give 10/10 score in mail testing.&#10;&#10;Added maxinance and maxida push script installation via SSH. &#10;&#10;Added a new option --record-domain, --record-priority, --record-subdomain in directadmin API (da_api_admin)&#10;&#10;Renamed AUTO_SELECT_DA_API_PROTOCOL to C_DA_AUTO_SELECT_API_PROTOCOL to represent this variable coming from config file&#10;&#10;Added ncdu installation in function pre_setup()&#10;&#10;Removed bind configuration in configure_net(), put them in a new function configure_bind(). This function will configure everything about bind&#10;&#10;Added the ability for directadmin to use software custom version before installation (install_da_pre). For example, clamav can be downgraded into older version (in case of bug in the new version)&#10;&#10;Added ability to customize clamav version in config file&#10;&#10;Added ability to provide workaround or temporary for known issues that prevent directadmin from installing (this normally happen when new directadmin version or new software update is released). The option that can be used in config file is C_DA_ENABLE_PRE_INSTALL_TEMP_FIX=true/false. Only use this if directadmin has problem installing. Always set this false when there is no issue.&#10;&#10;Added a new memory availability that show during directadmin installation.&#10;&#10;Added a oneline output progress bar from log file. This will show a nice output in oneline what operation directadmin is doing when installing&#10;&#10;Increased directadmin log output error line from 10 to 20 when the installation halt.&#10;&#10;Added the ability to automatically restart directadmin installation when there is error (this also will display the count how many time the installation has executed in installation progress)&#10;&#10;Added automatic create an error log file based on date when directadmin installation has error. This error log can be used to audit. &#10;&#10;Added the ability to disable and enable bind function in server (not only for Directadmin), When enable, automatically secure the bind option with some config.&#10;&#10;&#10;Added a new option C_DA_TOKENIZER_DEBUG to enable tokenizer in directadmin debug mode&#10;&#10;Added a new function configure_maxinance(), this will install the maintenance script for server&#10;&#10;&#10;Renamed configure_wpcli() to configure_da_wpcli() because this wpcli will be configured only based on directadmin. wpcli is a wordpress command line interface.&#10;&#10;&#10;Updated configure_maxida() installation. This will install a binary name is dacli (Directadmin Command Line Interface). This is a very important cli feature for directadmin to manage directadmin from the backend. I have requested this feature here: https://feedback.directadmin.com/b/feature-requests/include-directadmin-cli-commands/&#10;&#10;Added the ability to enable or disable all domain security header globally (not HSTS), currently tested on nginx_apache, might work with standalone apache but have not tested on standalone nginx. The option that can be used is C_DA_ENABLE_DOMAIN_SECURITY_HEADER.&#10;&#10;Added the ability to enable hsts header for all domain globally using option C_DA_ENABLE_DOMAIN_HSTS (except the hostname as hostname has its own config from directadmin). The next planned feature will enable hsts based on domain. &#10;&#10;Added workaround for hsts preload as mentioned here: https://forum.directadmin.com/threads/problem-with-ssl-on-hostname-and-da-and-hsts-with-other-aplications-on-other-ports.64137/post-335495">
      <created>1631977416251</created>
      <option name="number" value="00139" />
      <option name="presentableId" value="LOCAL-00139" />
      <option name="project" value="LOCAL" />
      <updated>1631977416251</updated>
    </task>
    <task id="LOCAL-00140" summary="Added suricata lua report and CSF blocking template">
      <created>1632763990284</created>
      <option name="number" value="00140" />
      <option name="presentableId" value="LOCAL-00140" />
      <option name="project" value="LOCAL" />
      <updated>1632763990284</updated>
    </task>
    <task id="LOCAL-00141" summary="New update">
      <created>1633879344235</created>
      <option name="number" value="00141" />
      <option name="presentableId" value="LOCAL-00141" />
      <option name="project" value="LOCAL" />
      <updated>1633879344235</updated>
    </task>
    <task id="LOCAL-00142" summary="Update readme">
      <created>1633879946370</created>
      <option name="number" value="00142" />
      <option name="presentableId" value="LOCAL-00142" />
      <option name="project" value="LOCAL" />
      <updated>1633879946370</updated>
    </task>
    <task id="LOCAL-00143" summary="Update readme">
      <created>1633880519631</created>
      <option name="number" value="00143" />
      <option name="presentableId" value="LOCAL-00143" />
      <option name="project" value="LOCAL" />
      <updated>1633880519631</updated>
    </task>
    <task id="LOCAL-00144" summary="New update and bug fixed">
      <created>1634094547598</created>
      <option name="number" value="00144" />
      <option name="presentableId" value="LOCAL-00144" />
      <option name="project" value="LOCAL" />
      <updated>1634094547598</updated>
    </task>
    <task id="LOCAL-00145" summary="New update">
      <created>1634438863001</created>
      <option name="number" value="00145" />
      <option name="presentableId" value="LOCAL-00145" />
      <option name="project" value="LOCAL" />
      <updated>1634438863002</updated>
    </task>
    <task id="LOCAL-00146" summary="New version update">
      <created>1634463141385</created>
      <option name="number" value="00146" />
      <option name="presentableId" value="LOCAL-00146" />
      <option name="project" value="LOCAL" />
      <updated>1634463141385</updated>
    </task>
    <task id="LOCAL-00147" summary="Updated dropbox_cli installation on local OS&#10;Added command to update local OS before starting initial server deployment&#10;Added file checker before uploading to remote to prevent errors&#10;Added comment about app scope creation for dropbox_api()&#10;Fixed error during directadmin installation. The latest installer terminated if /etc/hosts are read-only&#10;By default, the new Directadmin installer does not show up custombuild progress. Added, an environment variable A_FOREGROUND_CUSTOMBUILD=&quot;yes&quot; to fix this issue&#10;Removed ListOptions -a from proftpd.conf. It is a deprecated option.&#10;In the new installer, we can automatically add the admin (owner) username and password during installation at the function configure_da_owner_accounts(). Added TODO.">
      <created>1666631050958</created>
      <option name="number" value="00147" />
      <option name="presentableId" value="LOCAL-00147" />
      <option name="project" value="LOCAL" />
      <updated>1666631050958</updated>
    </task>
    <task id="LOCAL-00148" summary="&#10;Added new directadmin API add-hostname&#10;# da_api_admin add-hostname --hostname server.domain.com --ip-address 123.123.123.123 --nameserver1 ns1.domain.com --nameserver2 ns2.domain.com&#10;&#10;Removed directadmin.conf deprecated variables&#10;add new variable C_PHP_FPM_MAX_CHILDREN_DEFAULT&#10;&#10;Added new command to create hostname before creating dkim&#10;&#10;Added new action dadebug&#10;&#10;run: maxinet dadebug &#10;&#10;to enable directadmin debug mode automatically in terminal&#10;&#10;Updated sample config file">
      <created>1666681706436</created>
      <option name="number" value="00148" />
      <option name="presentableId" value="LOCAL-00148" />
      <option name="project" value="LOCAL" />
      <updated>1666681706436</updated>
    </task>
    <task id="LOCAL-00149" summary="Updated www webapps on root server domain to display server information. Webapps code are not available in public repo for security reason&#10;Fixed bug missing dnsutils, curl and genisoimage packages for local OS Debian and Ubuntu&#10;Added dropbox account test before upload files to remote server&#10;Wrote missing 2 variables template for custombuild options.conf (for Directadmin): csf=no, redis=yes&#10;Improved .htaccess entries on root webapps in /var/www/html/.htaccess (include nice UI for errordocs)&#10;Fixed directadmin version comparison that warned about creation DNS template&#10;Fixed issue on directadmin new installer that prevents of creation DKIM for hostname. New installer did not automatically create hostname DNS record.&#10;Added gotify as service in directadmin service monitor to be able to manually stop this service in web GUI&#10;Fixed speedtest-cli installation using new repository (old repository has outdated key that can't be installed)&#10;Fixed issue on web maintenance mode. After everything is installed using this script, make sure all websites are not in maintenance mode (might be in maintenance mode using my previous dacli script). Added a command to turn them on after restoration using dacli">
      <created>1666788147986</created>
      <option name="number" value="00149" />
      <option name="presentableId" value="LOCAL-00149" />
      <option name="project" value="LOCAL" />
      <updated>1666788147986</updated>
    </task>
    <task id="LOCAL-00150" summary="Gave an extra time for linode server to start after remote unlock from 5 to 10 seconds. This to prevent error during file transfer after remote unlock.&#10;Sometimes SSL certificate request has latency issue. Added retry for both staging and real SSL request so that that installation will not halt for this small issue.">
      <created>1666815076393</created>
      <option name="number" value="00150" />
      <option name="presentableId" value="LOCAL-00150" />
      <option name="project" value="LOCAL" />
      <updated>1666815076393</updated>
    </task>
    <task id="LOCAL-00151" summary="Update maxiaide new custom_rules. It will always have the latest custom rules from /secure/maxiaide/custom_rules&#10;Fixed permission /var/www/html/redirect.php that was belonged to root. It should belong to webapps&#10;Copy webapps automatically from storage folder and fix the permission&#10;Fixed file permission /etc/virtual/$(hostname)&#10;Run maxiaide after finished install to generate the first database">
      <created>1666830731083</created>
      <option name="number" value="00151" />
      <option name="presentableId" value="LOCAL-00151" />
      <option name="project" value="LOCAL" />
      <updated>1666830731083</updated>
    </task>
    <task id="LOCAL-00152" summary="Updated help section (there are more)&#10;Added new API to monitor user backup (required further testing as it is a new API)&#10;Added rsync for file download in order to have incremental backup features&#10;Added email before directadmin installation at /etc/aliases&#10;Added get_status_message line before downloading directadmin setup.ssh. At this moment we need to stop the script if the directadmin script site is down.&#10;Added get_status_message when changing /etc/hosts permission attribute to halt the script if it's not working&#10;Added maldetect installer if clamav is installed to speedup virus scan in server&#10;Fixed phpmyadmin blowfish secret key length generation&#10;Added lynis binary at configure_maxinis() function&#10;Enable AIDE scan at setup_post function to generate first database&#10;Added new script backup folder automatically to store backup files (such as server backup files)&#10;Added new command to back up server files into local OS. To trigger backup use the following command:&#10;&#10;maxinet backup-server /remote_path1 /remote_path2&#10;&#10;or&#10;&#10;maxinet backup-server&#10;&#10;to backup the full system.">
      <created>1667006540027</created>
      <option name="number" value="00152" />
      <option name="presentableId" value="LOCAL-00152" />
      <option name="project" value="LOCAL" />
      <updated>1667006540027</updated>
    </task>
    <task id="LOCAL-00153" summary="Updated ssh_api function, to create external options arguments for rsync&#10;Updated configure_da_sql function to fix mysql temp folder that cannot be used to write sql backup file&#10;Added function clean_setup_files() that can be used to clean all setup files manually:&#10;&#10;maxinet clean (to clean everything except log and conf files); can still resume installation.&#10;&#10;or &#10;&#10;maxinet clean full (to clean everything including log and conf folders); cannot resume installation.&#10;Added backup exclusion list for backup-server">
      <created>1667118611650</created>
      <option name="number" value="00153" />
      <option name="presentableId" value="LOCAL-00153" />
      <option name="project" value="LOCAL" />
      <updated>1667118611650</updated>
    </task>
    <task id="LOCAL-00154" summary="Fixed SSL file transfer path from secure folder to remote server&#10;&#10;Added restart mysqld after changing setting at configure_da_sql function. This fixed issue mysql did not use newly created config during setup.&#10;&#10;Updated configure_da_dns_templates function to not ask for confirmation if DA version is newest and the config is verified for old version. This config always work as verified many releases of DA. Just gave a warning with _pause command within 10 seconds&#10;&#10;Renamed function configure_da_host_domain_ssl() to configure_da_hostname_ssl()&#10;&#10;Skipped asking question to configure DNS template at function configure_da_dns_templates() but add 10 seconds notice delay. It seems the template always work.&#10;&#10;&#10;Commented the option enable_ssl_sni in configure_da_ssl_pre() function because this option is not recognized and is not used anymore by Directadmin.&#10;&#10;&#10;Added get_status_message call function for some directadmin set command to halt script if something is wrong. A minor issue with this command without return success from directadmin will halt the script, so that I can check what is going on.&#10;&#10;Added fix ssl=0 again where in the new directadmin installation it will automatically request SSL for hostname and add ssl=1 automatically. I don't know when it happens as there was no clue how it was done internally. So add a condition if the SSL staging and production request failed, we also check this value to make sure ssl=0.&#10;&#10;Added SSL request retry for both staging and production&#10;&#10;Fixed a hung status for the following message when requesting SSL:&#10;&#10;acme: Trying to solve HTTP-01">
      <created>1668053715381</created>
      <option name="number" value="00154" />
      <option name="presentableId" value="LOCAL-00154" />
      <option name="project" value="LOCAL" />
      <updated>1668053715381</updated>
    </task>
    <task id="LOCAL-00155" summary="Fixed dbxcli prompt for authentication not to use wrong invalid config. If /root/.dropbox_uploader does not exist, we call dbxcli to authenticate manually for the first time (for new OS)&#10;&#10;Added dropbox_api test-account before initialize server&#10;&#10;Added missing package bc for ubuntu&#10;&#10;Fixed command newaliases not found. Must use it after DA installation because DA needs to install exim or postfix first before using command newaliases. Also added restart exim and postfix&#10;&#10;Added apache server-status and server-info route protection. To prevent abuser/hacker to sneak info about the server when the default route is not changed. Added custom password that can be defined in config file for these routes.&#10;&#10;Fixed wrong variable C_DA_APACHE_SERVER_STATUS_ROUTE and C_DA_APACHE_SERVER_INFO_ROUTE. They should be C_APACHE_SERVER_STATUS_ROUTE and C_APACHE_SERVER_INFO_ROUTE&#10;&#10;Fixed typo on echo $(msgend) should be $(msg end)">
      <created>1668229323654</created>
      <option name="number" value="00155" />
      <option name="presentableId" value="LOCAL-00155" />
      <option name="project" value="LOCAL" />
      <updated>1668229323654</updated>
    </task>
    <task id="LOCAL-00156" summary="Fixed writing new email aliases duplication&#10;Fixed mail command not found&#10;Fixed .htaccess was not copied from webapps&#10;Added SMTP configuration with mail test&#10;Removed ./build bubblewrap just use ./build jailshell&#10;Fixed mysql command not found&#10;Added maxiclam installation. This CLI can manage both maldet and clamAV&#10;&#10;&#10;Updated maxinet.conf.sample&#10;&#10;New variables from maxinet.con.sample:&#10;&#10;# This is for system mail (use for notification, or reports)&#10;# Email username&#10;C_SMTP_SYSTEM_MAIL_USER=&quot;mailuser&quot;&#10;# Mail domain&#10;C_SMTP_SYSTEM_MAIL_DOMAIN=&quot;gmail.com&quot;&#10;# For gmail use app password&#10;C_SMTP_SYSTEM_MAIL_PASSWORD=&quot;mpsssepsousda2xx&quot;&#10;# The smtp domain&#10;C_SMTP_SYSTEM_MAIL_SMTP_URL=&quot;smtp.gmail.com&quot;&#10;# The authentication port&#10;C_SMTP_SYSTEM_MAIL_PORT=&quot;587&quot;&#10;# Format email(&lt;name_description&gt;)&#10;C_SMTP_SYSTEM_MAIL_FROM=&quot;arafatx@gmail.com(Arafat)&quot;">
      <created>1669319450643</created>
      <option name="number" value="00156" />
      <option name="presentableId" value="LOCAL-00156" />
      <option name="project" value="LOCAL" />
      <updated>1669319450643</updated>
    </task>
    <task id="LOCAL-00157" summary="Added transfer maxiclam excluded list files from secure folder&#10;&#10;Added bsd-mailx package installation for Debian&#10;&#10;Another fixed mail command not found after DA has finished installation (we use bsd-mailx)&#10;&#10;Fixed smtp config file at /root/.mailrc&#10;&#10;Added CSF installation using DA build command&#10;&#10;Added various security configs from DA&#10;&#10;Updated configure_maxiclam() configuration&#10;&#10;Added command to remote / clean up maxiclam files after setup&#10;&#10;Updated maxinet.conf.sample">
      <created>1669749581459</created>
      <option name="number" value="00157" />
      <option name="presentableId" value="LOCAL-00157" />
      <option name="project" value="LOCAL" />
      <updated>1669749581459</updated>
    </task>
    <task id="LOCAL-00158" summary="Updated maxiaide binary to fix some issues&#10;Updated maldet installation and fixed issue with maldet startup service bug on Debian 11&#10;Fixed issue with csf installation with custombuild options.conf&#10;Updated configure_maxiaide() function to remove maldet cron.daily as this will be managed by the maxiaide scan --cronjob automatically.">
      <created>1669914998489</created>
      <option name="number" value="00158" />
      <option name="presentableId" value="LOCAL-00158" />
      <option name="project" value="LOCAL" />
      <updated>1669914998489</updated>
    </task>
    <task id="LOCAL-00159" summary="Added condition to remove maldet cronjob shipped by the script because it will be replaced with maxiclam scan --cronjob&#10;&#10;Added installation of inotify-tools to fix issue on maldet startup&#10;&#10;Fixed php memcached installation was not successful&#10;&#10;&#10;Updated maxicron with new commands. maxicron stop-some-services command has been improved. Updated configure_services() function to include other services.&#10;&#10;&#10;Fixed and upgraded suricata installation to use the latest stable version 6.0.9. Added another suricata installation method for Debian bullseye for backport, and added current and latest value to install suricata.&#10;&#10;&#10;Added command to only update maxinet script and maxinet.conf config into remote server (eg: maxinet update-script-only)&#10;&#10;new variable in config file:&#10;&#10;C_DA_ALTERNATE_EMAIL">
      <created>1670082694522</created>
      <option name="number" value="00159" />
      <option name="presentableId" value="LOCAL-00159" />
      <option name="project" value="LOCAL" />
      <updated>1670082694522</updated>
    </task>
    <task id="LOCAL-00160" summary="The directadmin hook scripts usage for multiple scripts are not well documented for execution order and they are very confusing and hard to debug log output. See secure/directadmin/custom_scripts/aa_hook_scripts/readme.md for more information about the custom hook script rule.&#10;&#10;In this update:&#10;&#10;Added new da custom hook script installation at configure_da_scripts() function&#10;&#10;&#10;I created a new method to handle hook script execution in order. You can have one or more scripts inside this custom hook script folder /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/&lt;da_hook_name&gt;/&lt;your script&gt;&#10;&#10;That means, now you can ignore the default hook scripts inside /usr/local/directadmin/scripts/custom/&lt;da_hook_name&gt; because you cannot control the order of the script. You do not to create anything here as this script will place a main script called aa_main.sh in each hook script to manage the script order&#10;&#10;How does it work?&#10;-----------------&#10;&#10;Let us say, you have created 3 custom scripts inside filemanager_pre hook script here:&#10;&#10;&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_script.sh&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/useful_method.sh&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/change_that.sh&#10;&#10;In order to enable the custom scripts above, you need to do 2 steps:&#10;&#10;First, enable this main hook filemanager_pre at /usr/local/directadmin/scripts/custom/aa_hook_scripts/aa_options.conf:&#10;&#10;# Put filemanager_pre as one of the arrays here. The list is in bash array, so you can put multiple hook script name here to enable them&#10;AA_ENABLE_HOOKS=(&quot;filemanager_pre&quot; &quot;letsencrypt_pre&quot;)&#10;&#10;Second, you need to define the script execution order inside options.conf hook script name. The file was automatically created for each da hook script if it is not exist here:&#10;&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/options.conf&#10;&#10;Put the execution oder as below:&#10;&#10;RUN_HOOK_SCRIPT_LIST=(&quot;block_script.sh&quot; &quot;useful_method.sh&quot; &quot;change_that.sh&quot;)&#10;&#10;The above config means, the block_script.sh will run first then it will run useful_method.sh and finally change_that.sh&#10;&#10;How to debug the hook script?&#10;-----------------------------&#10;&#10;In order to debug each of the custom hook scripts, these options inside aa_options.conf should be use:&#10;&#10;&#10;# Whether to output log file for each individual hookscript call. The file name would be &lt;hook_name&gt;.&lt;script_name&gt;.log&#10;# The individual log file will be placed at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/&lt;hook_name&gt;/&lt;hook_name&gt;.&lt;script_name&gt;.log&#10;AA_ENABLE_LOG=yes&#10;# The option below is used whether to combine the individual custom hook script log file in a one file inside aa_hook_scripts/all_hook_scripts.log&#10;# Using this option, you can watch all the custom hook script log using tail -f all_hook_scripts.log&#10;AA_ENABLE_GLOBAL_LOG=yes&#10;&#10;If a main hook script name is not enabled in aa_options.conf it will only produce the following example log file (eg: brute_force_notify_pre hook name):&#10;&#10;[brute_force_notify_pre-&gt;aa_main.sh][16:16:43.214172]: Skipped, this hook is not enabled in /usr/local/directadmin/scripts/custom/aa_hook_scripts/aa_options.conf&#10;&#10;If a main hook script name is enabled in aa_options.conf, you will get the following (eg: filemanager_pre hook name):&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.361622]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;SESSION_ID=*********************&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.805326]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;json=yes&#10;SESSION_ID=*********************&#10;filemanager_du=0&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;action=parent_tree&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.806431]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;ipp=50&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;json=yes&#10;SESSION_ID=*********************&#10;filemanager_du=0&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;action=json_all&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;page=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;If you do not need log generated, you can disable it from aa_options.conf:&#10;&#10;# Whether to output log file for each individual hook script call&#10;AA_ENABLE_LOG=no&#10;&#10;---&#10;&#10;Updated a new directadmin.conf variable hook_custom_vars inside config file:&#10;&#10;&#10;# With this setting, it will allow custom hook script to pass custom variables between hook scripts&#10;&#10;C_DA_HOOK_CUSTOM_VARS=1&#10;&#10;Fixed suricata installation required components installation&#10;Added a new command for maxinet to update only da hook scripts into remote server:&#10;&#10;command:&#10;maxinet update-da-scripts">
      <created>1670230862422</created>
      <option name="number" value="00160" />
      <option name="presentableId" value="LOCAL-00160" />
      <option name="project" value="LOCAL" />
      <updated>1670230862423</updated>
    </task>
    <task id="LOCAL-00161" summary="Fixed script warn about wiping entire partition did not have condition set&#10;&#10;Fixed rsync transfer file error because of invalid directory after ISO creation.&#10;&#10;Fixed wrong script path in da hook scripts&#10;&#10;Added condition to disable da hook script logging for deployment. This can be easily enabled in the file aa_options.conf">
      <created>1670241969775</created>
      <option name="number" value="00161" />
      <option name="presentableId" value="LOCAL-00161" />
      <option name="project" value="LOCAL" />
      <updated>1670241969775</updated>
    </task>
    <option name="localTasksCounter" value="162" />
    <servers />
  </component>
  <component name="TypeScriptGeneratedFilesManager">
    <option name="version" value="3" />
  </component>
  <component name="Vcs.Log.Tabs.Properties">
    <option name="TAB_STATES">
      <map>
        <entry key="MAIN">
          <value>
            <State />
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="Big feature: Ability to import previous SSL certificate automatically for hostname if the variable C_DA_RESTORE_HOSTNAME_FQHN_SSL is set to true. The renewal process is also done automatically. The hostname assigned in C_DA_BOX_HOSTNAME_FQHN must match previous SSL backup. &#10;&#10;Added a new function get_listening_port(), to obtain the current status of the port. Usage:&#10;&#10;get_listening_port &lt;port_number&gt;&#10;&#10;Addeda a new function generate_unused_port(), to generate unused port in local system. Usage:&#10;&#10;generate_unused_port&#10;&#10;eg. output: 12344&#10;&#10;Added a generic function to obtain script last return status in get_status_message()&#10;&#10;Enable dropbox file deletion before uploading (read the comment why) ... line 3871&#10;&#10;Added alias function for pre_setup and post_setup&#10;&#10;Fixed hidden error in net_configure2 for IPv6 entries&#10;&#10;Hide sensitive password after directadmin installation (if C_HIDE_SENSITIVE_TEXT = true)&#10;&#10;Other updates" />
    <MESSAGE value="Some security feature update, enable hsts on both host and domain, for host domain use this:&#10;&#10;C_DA_ENABLE_HOST_HSTS=&lt;value in second&gt;&#10;&#10;Added some other security headers:&#10;&#10;Added option to hide DA version header: use variable C_DA_SHOW_INFO_IN_HEADER (disabled by default)&#10;&#10;Added option to hide DA version title from client: use variable C_DA_SHOW_INFO_IN_TITLE (enabled by default)&#10;&#10;Block user directory access: use variable C_DA_CB_USERDIR_ACCESS&#10;&#10;Added a new function configure_domain_security()&#10;&#10;Renamed config variable from C_DA_RESTORE_HOSTNAME_FQHN_SSL to C_DA_RESTORE_PREVIOUS_HOSTNAME_SSL for better readability&#10;&#10;Added maxiperm ssh push in manage-maxicode action&#10;&#10;Improved configure_csf() for directadmin installation&#10;&#10;Added a new maxigpg public version&#10;&#10;Updated maxiaide public version to add new features&#10;&#10;Added a new maxiperm public version&#10;&#10;Other update and improvement" />
    <MESSAGE value="New update&#10;&#10;Added function get_ordinal(), to convert integer to ordinal type&#10;&#10;Added a new option --progress-style &lt;STRING&gt; in function _echo(), now it is possible to overwrite the config value for C_SPIN_PROGRESS. This option is used together with --start-spin&#10;&#10;Add the ability to add new MX record that does not have subdomain in copy_local_dns_to_external_dns(), this root MX record is required by mail-tester.com to give 10/10 score in mail testing.&#10;&#10;Added maxinance and maxida push script installation via SSH. &#10;&#10;Added a new option --record-domain, --record-priority, --record-subdomain in directadmin API (da_api_admin)&#10;&#10;Renamed AUTO_SELECT_DA_API_PROTOCOL to C_DA_AUTO_SELECT_API_PROTOCOL to represent this variable coming from config file&#10;&#10;Added ncdu installation in function pre_setup()&#10;&#10;Removed bind configuration in configure_net(), put them in a new function configure_bind(). This function will configure everything about bind&#10;&#10;Added the ability for directadmin to use software custom version before installation (install_da_pre). For example, clamav can be downgraded into older version (in case of bug in the new version)&#10;&#10;Added ability to customize clamav version in config file&#10;&#10;Added ability to provide workaround or temporary for known issues that prevent directadmin from installing (this normally happen when new directadmin version or new software update is released). The option that can be used in config file is C_DA_ENABLE_PRE_INSTALL_TEMP_FIX=true/false. Only use this if directadmin has problem installing. Always set this false when there is no issue.&#10;&#10;Added a new memory availability that show during directadmin installation.&#10;&#10;Added a oneline output progress bar from log file. This will show a nice output in oneline what operation directadmin is doing when installing&#10;&#10;Increased directadmin log output error line from 10 to 20 when the installation halt.&#10;&#10;Added the ability to automatically restart directadmin installation when there is error (this also will display the count how many time the installation has executed in installation progress)&#10;&#10;Added automatic create an error log file based on date when directadmin installation has error. This error log can be used to audit. &#10;&#10;Added the ability to disable and enable bind function in server (not only for Directadmin), When enable, automatically secure the bind option with some config.&#10;&#10;&#10;Added a new option C_DA_TOKENIZER_DEBUG to enable tokenizer in directadmin debug mode&#10;&#10;Added a new function configure_maxinance(), this will install the maintenance script for server&#10;&#10;&#10;Renamed configure_wpcli() to configure_da_wpcli() because this wpcli will be configured only based on directadmin. wpcli is a wordpress command line interface.&#10;&#10;&#10;Updated configure_maxida() installation. This will install a binary name is dacli (Directadmin Command Line Interface). This is a very important cli feature for directadmin to manage directadmin from the backend. I have requested this feature here: https://feedback.directadmin.com/b/feature-requests/include-directadmin-cli-commands/&#10;&#10;Added the ability to enable or disable all domain security header globally (not HSTS), currently tested on nginx_apache, might work with standalone apache but have not tested on standalone nginx. The option that can be used is C_DA_ENABLE_DOMAIN_SECURITY_HEADER.&#10;&#10;Added the ability to enable hsts header for all domain globally using option C_DA_ENABLE_DOMAIN_HSTS (except the hostname as hostname has its own config from directadmin). The next planned feature will enable hsts based on domain. &#10;&#10;Added workaround for hsts preload as mentioned here: https://forum.directadmin.com/threads/problem-with-ssl-on-hostname-and-da-and-hsts-with-other-aplications-on-other-ports.64137/post-335495" />
    <MESSAGE value="New update&#10;&#10;Added function get_ordinal(), to convert integer to ordinal type&#10;&#10;Added a new option --progress-style &lt;STRING&gt; in function _echo(), now it is possible to overwrite the config value for C_SPIN_PROGRESS. This option is used together with --start-spin&#10;&#10;Other update and improvement&#10;&#10;Add the ability to add new MX record that does not have subdomain in copy_local_dns_to_external_dns(), this root MX record is required by mail-tester.com to give 10/10 score in mail testing.&#10;&#10;Added maxinance and maxida push script installation via SSH. &#10;&#10;Added a new option --record-domain, --record-priority, --record-subdomain in directadmin API (da_api_admin)&#10;&#10;Renamed AUTO_SELECT_DA_API_PROTOCOL to C_DA_AUTO_SELECT_API_PROTOCOL to represent this variable coming from config file&#10;&#10;Added ncdu installation in function pre_setup()&#10;&#10;Removed bind configuration in configure_net(), put them in a new function configure_bind(). This function will configure everything about bind&#10;&#10;Added the ability for directadmin to use software custom version before installation (install_da_pre). For example, clamav can be downgraded into older version (in case of bug in the new version)&#10;&#10;Added ability to customize clamav version in config file&#10;&#10;Added ability to provide workaround or temporary for known issues that prevent directadmin from installing (this normally happen when new directadmin version or new software update is released). The option that can be used in config file is C_DA_ENABLE_PRE_INSTALL_TEMP_FIX=true/false. Only use this if directadmin has problem installing. Always set this false when there is no issue.&#10;&#10;Added a new memory availability that show during directadmin installation.&#10;&#10;Added a oneline output progress bar from log file. This will show a nice output in oneline what operation directadmin is doing when installing&#10;&#10;Increased directadmin log output error line from 10 to 20 when the installation halt.&#10;&#10;Added the ability to automatically restart directadmin installation when there is error (this also will display the count how many time the installation has executed in installation progress)&#10;&#10;Added automatic create an error log file based on date when directadmin installation has error. This error log can be used to audit. &#10;&#10;Added the ability to disable and enable bind function in server (not only for Directadmin), When enable, automatically secure the bind option with some config.&#10;&#10;&#10;Added a new option C_DA_TOKENIZER_DEBUG to enable tokenizer in directadmin debug mode&#10;&#10;Added a new function configure_maxinance(), this will install the maintenance script for server&#10;&#10;&#10;Renamed configure_wpcli() to configure_da_wpcli() because this wpcli will be configured only based on directadmin. wpcli is a wordpress command line interface.&#10;&#10;&#10;Updated configure_maxida() installation. This will install a binary name is dacli (Directadmin Command Line Interface). This is a very important cli feature for directadmin to manage directadmin from the backend. I have requested this feature here: https://feedback.directadmin.com/b/feature-requests/include-directadmin-cli-commands/&#10;&#10;Added the ability to enable or disable all domain security header globally (not HSTS), currently tested on nginx_apache, might work with standalone apache but have not tested on standalone nginx. The option that can be used is C_DA_ENABLE_DOMAIN_SECURITY_HEADER.&#10;&#10;Added the ability to enable hsts header for all domain globally using option C_DA_ENABLE_DOMAIN_HSTS (except the hostname as hostname has its own config from directadmin). The next planned feature will enable hsts based on domain. &#10;&#10;Added workaround for hsts preload as mentioned here: https://forum.directadmin.com/threads/problem-with-ssl-on-hostname-and-da-and-hsts-with-other-aplications-on-other-ports.64137/post-335495" />
    <MESSAGE value="Added suricata lua report" />
    <MESSAGE value="Added suricata lua report and CSF blocking template" />
    <MESSAGE value="Update readme" />
    <MESSAGE value="New update and bug fixed" />
    <MESSAGE value="New update" />
    <MESSAGE value="New version update" />
    <MESSAGE value="Updated dropbox_cli installation on local OS&#10;Added command to update local OS before starting initial server deployment&#10;Added file checker before uploading to remote to prevent errors&#10;Added comment about app scope creation for dropbox_api()&#10;Fixed error during directadmin installation. The latest installer terminated if /etc/hosts are read-only&#10;By default, the new Directadmin installer does not show up custombuild progress. Added, an environment variable A_FOREGROUND_CUSTOMBUILD=&quot;yes&quot; to fix this issue&#10;Removed ListOptions -a from proftpd.conf. It is a deprecated option.&#10;In the new installer, we can automatically add the admin (owner) username and password during installation at the function configure_da_owner_accounts(). Added TODO." />
    <MESSAGE value="&#10;Added new directadmin API add-hostname&#10;# da_api_admin add-hostname --hostname server.domain.com --ip-address 123.123.123.123 --nameserver1 ns1.domain.com --nameserver2 ns2.domain.com&#10;&#10;Removed directadmin.conf deprecated variables&#10;add new variable C_PHP_FPM_MAX_CHILDREN_DEFAULT&#10;&#10;Added new command to create hostname before creating dkim&#10;&#10;Added new action dadebug&#10;&#10;run: maxinet dadebug &#10;&#10;to enable directadmin debug mode automatically in terminal&#10;&#10;Updated sample config file" />
    <MESSAGE value="Updated www webapps on root server domain to display server information. Webapps code are not available in public repo for security reason&#10;Fixed bug missing dnsutils, curl and genisoimage packages for local OS Debian and Ubuntu&#10;Added dropbox account test before upload files to remote server&#10;Wrote missing 2 variables template for custombuild options.conf (for Directadmin): csf=no, redis=yes&#10;Improved .htaccess entries on root webapps in /var/www/html/.htaccess (include nice UI for errordocs)&#10;Fixed directadmin version comparison that warned about creation DNS template&#10;Fixed issue on directadmin new installer that prevents of creation DKIM for hostname. New installer did not automatically create hostname DNS record.&#10;Added gotify as service in directadmin service monitor to be able to manually stop this service in web GUI&#10;Fixed speedtest-cli installation using new repository (old repository has outdated key that can't be installed)&#10;Fixed issue on web maintenance mode. After everything is installed using this script, make sure all websites are not in maintenance mode (might be in maintenance mode using my previous dacli script). Added a command to turn them on after restoration using dacli" />
    <MESSAGE value="Gave an extra time for linode server to start after remote unlock from 5 to 10 seconds. This to prevent error during file transfer after remote unlock.&#10;Sometimes SSL certificate request has latency issue. Added retry for both staging and real SSL request so that that installation will not halt for this small issue." />
    <MESSAGE value="Update maxiaide new custom_rules. It will always have the latest custom rules from /secure/maxiaide/custom_rules&#10;Fixed permission /var/www/html/redirect.php that was belonged to root. It should belong to webapps&#10;Copy webapps automatically from storage folder and fix the permission&#10;Fixed file permission /etc/virtual/$(hostname)&#10;Run maxiaide after finished install to generate the first database" />
    <MESSAGE value="Updated help section (there are more)&#10;Added new API to monitor user backup (required further testing as it is a new API)&#10;Added rsync for file download in order to have incremental backup features&#10;Added email before directadmin installation at /etc/aliases&#10;Added get_status_message line before downloading directadmin setup.ssh. At this moment we need to stop the script if the directadmin script site is down.&#10;Added get_status_message when changing /etc/hosts permission attribute to halt the script if it's not working&#10;Added maldetect installer if clamav is installed to speedup virus scan in server&#10;Fixed phpmyadmin blowfish secret key length generation&#10;Added lynis binary at configure_maxinis() function&#10;Enable AIDE scan at setup_post function to generate first database&#10;Added new script backup folder automatically to store backup files (such as server backup files)&#10;Added new command to back up server files into local OS. To trigger backup use the following command:&#10;&#10;maxinet backup-server /remote_path1 /remote_path2&#10;&#10;or&#10;&#10;maxinet backup-server&#10;&#10;to backup the full system." />
    <MESSAGE value="Updated ssh_api function, to create external options arguments for rsync&#10;Updated configure_da_sql function to fix mysql temp folder that cannot be used to write sql backup file&#10;Added function clean_setup_files() that can be used to clean all setup files manually:&#10;&#10;maxinet clean (to clean everything except log and conf files); can still resume installation.&#10;&#10;or &#10;&#10;maxinet clean full (to clean everything including log and conf folders); cannot resume installation.&#10;Added backup exclusion list for backup-server" />
    <MESSAGE value="Fixed SSL file transfer path from secure folder to remote server&#10;&#10;Added restart mysqld after changing setting at configure_da_sql function. This fixed issue mysql did not use newly created config during setup.&#10;&#10;Updated configure_da_dns_templates function to not ask for confirmation if DA version is newest and the config is verified for old version. This config always work as verified many releases of DA. Just gave a warning with _pause command within 10 seconds&#10;&#10;Renamed function configure_da_host_domain_ssl() to configure_da_hostname_ssl()&#10;&#10;Skipped asking question to configure DNS template at function configure_da_dns_templates() but add 10 seconds notice delay. It seems the template always work.&#10;&#10;&#10;Commented the option enable_ssl_sni in configure_da_ssl_pre() function because this option is not recognized and is not used anymore by Directadmin.&#10;&#10;&#10;Added get_status_message call function for some directadmin set command to halt script if something is wrong. A minor issue with this command without return success from directadmin will halt the script, so that I can check what is going on.&#10;&#10;Added fix ssl=0 again where in the new directadmin installation it will automatically request SSL for hostname and add ssl=1 automatically. I don't know when it happens as there was no clue how it was done internally. So add a condition if the SSL staging and production request failed, we also check this value to make sure ssl=0.&#10;&#10;Added SSL request retry for both staging and production&#10;&#10;Fixed a hung status for the following message when requesting SSL:&#10;&#10;acme: Trying to solve HTTP-01" />
    <MESSAGE value="Fixed dbxcli prompt for authentication not to use wrong invalid config. If /root/.dropbox_uploader does not exist, we call dbxcli to authenticate manually for the first time (for new OS)&#10;&#10;Added dropbox_api test-account before initialize server&#10;&#10;Added missing package bc for ubuntu&#10;&#10;Fixed command newaliases not found. Must use it after DA installation because DA needs to install exim or postfix first before using command newaliases. Also added restart exim and postfix&#10;&#10;Added apache server-status and server-info route protection. To prevent abuser/hacker to sneak info about the server when the default route is not changed. Added custom password that can be defined in config file for these routes.&#10;&#10;Fixed wrong variable C_DA_APACHE_SERVER_STATUS_ROUTE and C_DA_APACHE_SERVER_INFO_ROUTE. They should be C_APACHE_SERVER_STATUS_ROUTE and C_APACHE_SERVER_INFO_ROUTE&#10;&#10;Fixed typo on echo $(msgend) should be $(msg end)" />
    <MESSAGE value="Fixed writing new email aliases duplication&#10;Fixed mail command not found&#10;Fixed .htaccess was not copied from webapps&#10;Added SMTP configuration with mail test&#10;Removed ./build bubblewrap just use ./build jailshell&#10;Fixed mysql command not found&#10;Added maxiclam installation. This CLI can manage both maldet and clamAV&#10;&#10;&#10;Updated maxinet.conf.sample&#10;&#10;New variables from maxinet.con.sample:&#10;&#10;# This is for system mail (use for notification, or reports)&#10;# Email username&#10;C_SMTP_SYSTEM_MAIL_USER=&quot;mailuser&quot;&#10;# Mail domain&#10;C_SMTP_SYSTEM_MAIL_DOMAIN=&quot;gmail.com&quot;&#10;# For gmail use app password&#10;C_SMTP_SYSTEM_MAIL_PASSWORD=&quot;mpsssepsousda2xx&quot;&#10;# The smtp domain&#10;C_SMTP_SYSTEM_MAIL_SMTP_URL=&quot;smtp.gmail.com&quot;&#10;# The authentication port&#10;C_SMTP_SYSTEM_MAIL_PORT=&quot;587&quot;&#10;# Format email(&lt;name_description&gt;)&#10;C_SMTP_SYSTEM_MAIL_FROM=&quot;arafatx@gmail.com(Arafat)&quot;" />
    <MESSAGE value="Added transfer maxiclam excluded list files from secure folder&#10;&#10;Added bsd-mailx package installation for Debian&#10;&#10;Another fixed mail command not found after DA has finished installation (we use bsd-mailx)&#10;&#10;Fixed smtp config file at /root/.mailrc&#10;&#10;Added CSF installation using DA build command&#10;&#10;Added various security configs from DA&#10;&#10;Updated configure_maxiclam() configuration&#10;&#10;Added command to remote / clean up maxiclam files after setup&#10;&#10;Updated maxinet.conf.sample" />
    <MESSAGE value="Updated maxiaide binary to fix some issues&#10;Updated maldet installation and fixed issue with maldet startup service bug on Debian 11&#10;Fixed issue with csf installation with custombuild options.conf&#10;Updated configure_maxiaide() function to remove maldet cron.daily as this will be managed by the maxiaide scan --cronjob automatically." />
    <MESSAGE value="Added condition to remove maldet cronjob shipped by the script because it will be replaced with maxiclam scan --cronjob&#10;&#10;Added installation of inotify-tools to fix issue on maldet startup&#10;&#10;Fixed php memcached installation was not successful&#10;&#10;&#10;Updated maxicron with new commands. maxicron stop-some-services command has been improved. Updated configure_services() function to include other services.&#10;&#10;&#10;Fixed and upgraded suricata installation to use the latest stable version 6.0.9. Added another suricata installation method for Debian bullseye for backport, and added current and latest value to install suricata.&#10;&#10;&#10;Added command to only update maxinet script and maxinet.conf config into remote server (eg: maxinet update-script-only)&#10;&#10;new variable in config file:&#10;&#10;C_DA_ALTERNATE_EMAIL" />
    <MESSAGE value="The directadmin hook scripts usage for multiple scripts are not well documented for execution order and they are very confusing and hard to debug log output. See secure/directadmin/custom_scripts/aa_hook_scripts/readme.md for more information about the custom hook script rule.&#10;&#10;In this update:&#10;&#10;Added new da custom hook script installation at configure_da_scripts() function&#10;&#10;&#10;I created a new method to handle hook script execution in order. You can have one or more scripts inside this custom hook script folder /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/&lt;da_hook_name&gt;/&lt;your script&gt;&#10;&#10;That means, now you can ignore the default hook scripts inside /usr/local/directadmin/scripts/custom/&lt;da_hook_name&gt; because you cannot control the order of the script. You do not to create anything here as this script will place a main script called aa_main.sh in each hook script to manage the script order&#10;&#10;How does it work?&#10;-----------------&#10;&#10;Let us say, you have created 3 custom scripts inside filemanager_pre hook script here:&#10;&#10;&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_script.sh&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/useful_method.sh&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/change_that.sh&#10;&#10;In order to enable the custom scripts above, you need to do 2 steps:&#10;&#10;First, enable this main hook filemanager_pre at /usr/local/directadmin/scripts/custom/aa_hook_scripts/aa_options.conf:&#10;&#10;# Put filemanager_pre as one of the arrays here. The list is in bash array, so you can put multiple hook script name here to enable them&#10;AA_ENABLE_HOOKS=(&quot;filemanager_pre&quot; &quot;letsencrypt_pre&quot;)&#10;&#10;Second, you need to define the script execution order inside options.conf hook script name. The file was automatically created for each da hook script if it is not exist here:&#10;&#10;/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/options.conf&#10;&#10;Put the execution oder as below:&#10;&#10;RUN_HOOK_SCRIPT_LIST=(&quot;block_script.sh&quot; &quot;useful_method.sh&quot; &quot;change_that.sh&quot;)&#10;&#10;The above config means, the block_script.sh will run first then it will run useful_method.sh and finally change_that.sh&#10;&#10;How to debug the hook script?&#10;-----------------------------&#10;&#10;In order to debug each of the custom hook scripts, these options inside aa_options.conf should be use:&#10;&#10;&#10;# Whether to output log file for each individual hookscript call. The file name would be &lt;hook_name&gt;.&lt;script_name&gt;.log&#10;# The individual log file will be placed at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/&lt;hook_name&gt;/&lt;hook_name&gt;.&lt;script_name&gt;.log&#10;AA_ENABLE_LOG=yes&#10;# The option below is used whether to combine the individual custom hook script log file in a one file inside aa_hook_scripts/all_hook_scripts.log&#10;# Using this option, you can watch all the custom hook script log using tail -f all_hook_scripts.log&#10;AA_ENABLE_GLOBAL_LOG=yes&#10;&#10;If a main hook script name is not enabled in aa_options.conf it will only produce the following example log file (eg: brute_force_notify_pre hook name):&#10;&#10;[brute_force_notify_pre-&gt;aa_main.sh][16:16:43.214172]: Skipped, this hook is not enabled in /usr/local/directadmin/scripts/custom/aa_hook_scripts/aa_options.conf&#10;&#10;If a main hook script name is enabled in aa_options.conf, you will get the following (eg: filemanager_pre hook name):&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.361622]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;SESSION_ID=*********************&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.805326]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;json=yes&#10;SESSION_ID=*********************&#10;filemanager_du=0&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;action=parent_tree&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;[filemanager_pre-&gt;aa_main.sh][16:51:30.806431]:&#10;&#10;******************** START MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;----------- START DA ENV VARIABLES ---------&#10;IS_LOGIN_KEY=0&#10;ipp=50&#10;LANGUAGE=en&#10;PWD=/usr/local/directadmin&#10;path=/usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre&#10;json=yes&#10;SESSION_ID=*********************&#10;filemanager_du=0&#10;caller_ip=*********************&#10;api=0&#10;LANG=en_US.UTF-8&#10;CLIENT_IP=*********************&#10;INVOCATION_ID=*********************&#10;action=json_all&#10;username=*********************&#10;IS_LOGIN_AS=0&#10;NOTIFY_SOCKET=/run/systemd/notify&#10;SHLVL=1&#10;page=1&#10;JOURNAL_STREAM=8:8160850&#10;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#10;command=/CMD_FILE_MANAGER&#10;_=/usr/bin/env&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;----------- END DA ENV VARIABLES -----------&#10;&#10;&#10;1) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;1) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/block_deletion.sh&#10;&#10;2) START calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;        start output&#10;&#10;---------------------------------------&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;[filemanager_pre-&gt;abc.sh]: This abc.sh. No termination&#10;---------------------------------------&#10;&#10;        end output&#10;&#10;2) END calling script at /usr/local/directadmin/scripts/custom/aa_hook_scripts/scripts/filemanager_pre/abc.sh&#10;&#10;******************** END MAIN SCRIPT filemanager_pre/aa_main.sh ********************&#10;&#10;If you do not need log generated, you can disable it from aa_options.conf:&#10;&#10;# Whether to output log file for each individual hook script call&#10;AA_ENABLE_LOG=no&#10;&#10;---&#10;&#10;Updated a new directadmin.conf variable hook_custom_vars inside config file:&#10;&#10;&#10;# With this setting, it will allow custom hook script to pass custom variables between hook scripts&#10;&#10;C_DA_HOOK_CUSTOM_VARS=1&#10;&#10;Fixed suricata installation required components installation&#10;Added a new command for maxinet to update only da hook scripts into remote server:&#10;&#10;command:&#10;maxinet update-da-scripts" />
    <MESSAGE value="Fixed script warn about wiping entire partition did not have condition set&#10;&#10;Fixed rsync transfer file error because of invalid directory after ISO creation.&#10;&#10;Fixed wrong script path in da hook scripts&#10;&#10;Added condition to disable da hook script logging for deployment. This can be easily enabled in the file aa_options.conf" />
    <option name="LAST_COMMIT_MESSAGE" value="Fixed script warn about wiping entire partition did not have condition set&#10;&#10;Fixed rsync transfer file error because of invalid directory after ISO creation.&#10;&#10;Fixed wrong script path in da hook scripts&#10;&#10;Added condition to disable da hook script logging for deployment. This can be easily enabled in the file aa_options.conf" />
  </component>
</project>